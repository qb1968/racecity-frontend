{"ast":null,"code":"var _jsxFileName = \"D:\\\\Dustin\\\\racecity-frontend\\\\src\\\\admin\\\\AddProduct.js\";\nimport React, { useState, useEffect } from 'react';\nimport Layout from '../core/Layout';\nimport { isAuthenticated } from '../auth';\nimport { Link } from 'react-router-dom';\nimport { createProduct, getCategories } from './apiAdmin';\n\nconst AddProduct = () => {\n  const [values, setValues] = useState({\n    name: '',\n    description: '',\n    price: '',\n    categories: [],\n    category: '',\n    shipping: '',\n    quantity: '',\n    photo: '',\n    image: '',\n    loading: false,\n    error: '',\n    createdProduct: '',\n    redirectToProfile: false,\n    formData: ''\n  });\n  const {\n    user,\n    token\n  } = isAuthenticated();\n  const {\n    name,\n    description,\n    price,\n    categories,\n    category,\n    shipping,\n    quantity,\n    // photo,\n    // image,\n    loading,\n    error,\n    createdProduct,\n    redirectToProfile,\n    formData\n  } = values; // load categories and set form data\n\n  const init = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error\n        });\n      } else {\n        setValues({ ...values,\n          categories: data,\n          formData: new FormData()\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const handleChange = name => event => {\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const handleChange2 = name => event => {\n    const value = name === 'image' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values,\n      error: '',\n      loading: true\n    });\n    createProduct(user._id, token, formData).then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error\n        });\n      } else {\n        setValues({ ...values,\n          name: '',\n          description: '',\n          photo: '',\n          image: '',\n          price: '',\n          quantity: '',\n          loading: false,\n          createdProduct: data.name\n        });\n      }\n    });\n  }; //   const [image, setImage ] = useState(\"\");\n  // const [ url, setUrl ] = useState(\"\");\n  // const uploadImage = () => {\n  //   const data = new FormData()\n  //   data.append(\"file\", image)\n  //   data.append(\"upload_preset\", \"comics\")\n  // data.append(\"cloud_name\",\"qb1968\")\n  // fetch(\" \thttps://api.cloudinary.com/v1_1/qb1968/image/upload\",{\n  // method:\"post\",\n  // body: data\n  // })\n  // .then(resp => resp.json())\n  // .then(data => {\n  // setUrl(data.url)\n  // })\n  // .catch(err => console.log(err))\n  // }\n\n\n  const newPostForm = () => /*#__PURE__*/React.createElement(\"form\", {\n    className: \"mb-3\",\n    onSubmit: clickSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, \"Front Photo\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"btn btn-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange(\"photo\"),\n    type: \"file\",\n    multiple: true,\n    name: \"photo\",\n    accept: \"image/*\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, \"Rear Photo\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"btn btn-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange2(\"image\"),\n    type: \"file\",\n    name: \"image\",\n    accept: \"image/*\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange(\"name\"),\n    type: \"text\",\n    className: \"form-control\",\n    value: name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    onChange: handleChange(\"description\"),\n    className: \"form-control\",\n    value: description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange(\"price\"),\n    type: \"number\",\n    className: \"form-control\",\n    value: price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n    onChange: handleChange(\"category\"),\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, \"Please select\"), categories && categories.map((c, i) => /*#__PURE__*/React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }, c.name)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"select\", {\n    onChange: handleChange(\"shipping\"),\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, \"Please select\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, \"No\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, \"Yes\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange(\"price\"),\n    value: price,\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, \"Quantity\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange(\"quantity\"),\n    type: \"number\",\n    className: \"form-control\",\n    value: quantity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-outline-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }\n  }, \"Create Product\"));\n\n  const showError = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 5\n    }\n  }, error);\n\n  const showSuccess = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-info\",\n    style: {\n      display: createdProduct ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }\n  }, `${createdProduct}`, \" is created!\"));\n\n  const showLoading = () => loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }\n  }, \"Loading...\"));\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: \"Add a new product\",\n    description: `Hey ${user.name}, ready to add a new product?`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 offset-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }\n  }, showLoading(), showSuccess(), showError(), newPostForm())));\n};\n\nexport default AddProduct;","map":{"version":3,"sources":["D:/Dustin/racecity-frontend/src/admin/AddProduct.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","createProduct","getCategories","AddProduct","values","setValues","name","description","price","categories","category","shipping","quantity","photo","image","loading","error","createdProduct","redirectToProfile","formData","user","token","init","then","data","FormData","handleChange","event","value","target","files","set","handleChange2","clickSubmit","preventDefault","_id","newPostForm","map","c","i","showError","display","showSuccess","showLoading"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { createProduct, getCategories } from './apiAdmin';\r\n\r\nconst AddProduct = () => {\r\n  const [values, setValues] = useState({\r\n    name: '',\r\n    description: '',\r\n    price: '',\r\n    categories: [],\r\n    category: '',\r\n    shipping: '',\r\n    quantity: '',\r\n    photo: '',\r\n    image:'',\r\n    loading: false,\r\n    error: '',\r\n    createdProduct: '',\r\n    redirectToProfile: false,\r\n    formData: '',\r\n  \r\n  });\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const {\r\n    name,\r\n    description,\r\n    price,\r\n    categories,\r\n    category,\r\n    shipping,\r\n    quantity,\r\n    // photo,\r\n    // image,\r\n    loading,\r\n    error,\r\n    createdProduct,\r\n    redirectToProfile,\r\n    formData,\r\n    \r\n  } = values;\r\n\r\n  // load categories and set form data\r\n  const init = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          categories: data,\r\n          formData: new FormData(),\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init();\r\n  }, []);\r\n\r\n  const handleChange = (name) => (event) => {\r\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n    formData.set(name, value);\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n  const handleChange2 = (name) => (event) => {\r\n    const value = name === 'image' ? event.target.files[0] : event.target.value;\r\n    formData.set(name, value);\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: '', loading: true });\r\n\r\n    createProduct(user._id, token, formData).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          name: '',\r\n          description: '',\r\n          photo: '',\r\n          image: '',\r\n          price: '',\r\n          quantity: '',\r\n          loading: false,\r\n          createdProduct: data.name,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n//   const [image, setImage ] = useState(\"\");\r\n// const [ url, setUrl ] = useState(\"\");\r\n\r\n// const uploadImage = () => {\r\n//   const data = new FormData()\r\n//   data.append(\"file\", image)\r\n//   data.append(\"upload_preset\", \"comics\")\r\n// data.append(\"cloud_name\",\"qb1968\")\r\n// fetch(\" \thttps://api.cloudinary.com/v1_1/qb1968/image/upload\",{\r\n// method:\"post\",\r\n// body: data\r\n// })\r\n// .then(resp => resp.json())\r\n// .then(data => {\r\n// setUrl(data.url)\r\n// })\r\n// .catch(err => console.log(err))\r\n// }\r\n\r\n  const newPostForm = () => (\r\n    <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n      <h4>Front Photo</h4>\r\n      <div className=\"form-group\">\r\n        <label className=\"btn btn-secondary\">\r\n          <input\r\n            onChange={handleChange(\"photo\")}\r\n            type=\"file\"\r\n            multiple\r\n            name=\"photo\"\r\n            accept=\"image/*\"\r\n          />\r\n        </label>\r\n      </div>\r\n      \r\n      <h4>Rear Photo</h4>\r\n      <div className=\"form-group\">\r\n        <label className=\"btn btn-secondary\">\r\n          <input\r\n            onChange={handleChange2(\"image\")}\r\n            type=\"file\"\r\n           \r\n            name=\"image\"\r\n            accept=\"image/*\"\r\n          />\r\n        </label>\r\n      </div>\r\n      {/* <div className=\"form-group\">\r\n        <label className=\"btn btn-secondary\">\r\n          \r\n          <input type=\"file\" onChange= {(e)=> setImage(e.target.files[0])}></input>\r\n<button onClick={uploadImage}>Upload</button>\r\n        </label>\r\n        <img src={url} alt=\"\"/>\r\n      </div> */}\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          onChange={handleChange(\"name\")}\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={name}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Description</label>\r\n        <textarea\r\n          onChange={handleChange(\"description\")}\r\n          className=\"form-control\"\r\n          value={description}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Price</label>\r\n        <input\r\n          onChange={handleChange(\"price\")}\r\n          type=\"number\"\r\n          className=\"form-control\"\r\n          value={price}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Category</label>\r\n        <select onChange={handleChange(\"category\")} className=\"form-control\">\r\n          <option>Please select</option>\r\n          {categories &&\r\n            categories.map((c, i) => (\r\n              <option key={i} value={c._id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Shipping</label>\r\n        <select onChange={handleChange(\"shipping\")} className=\"form-control\">\r\n          <option>Please select</option>\r\n          <option value=\"0\">No</option>\r\n          <option value=\"1\">Yes</option>\r\n          <input onChange={handleChange(\"price\")} value={price} type=\"number\" />\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Quantity</label>\r\n        <input\r\n          onChange={handleChange(\"quantity\")}\r\n          type=\"number\"\r\n          className=\"form-control\"\r\n          value={quantity}\r\n        />\r\n      </div>\r\n\r\n      <button className=\"btn btn-outline-primary\">Create Product</button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className='alert alert-danger'\r\n      style={{ display: error ? '' : 'none' }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = () => (\r\n    <div\r\n      className='alert alert-info'\r\n      style={{ display: createdProduct ? '' : 'none' }}\r\n    >\r\n      <h2>{`${createdProduct}`} is created!</h2>\r\n    </div>\r\n  );\r\n\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className='alert alert-success'>\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <Layout\r\n      title='Add a new product'\r\n      description={`Hey ${user.name}, ready to add a new product?`}\r\n    >\r\n      <div className='row'>\r\n        <div className='col-md-8 offset-md-2'>\r\n          {showLoading()}\r\n          {showSuccess()}\r\n          {showError()}\r\n          {newPostForm()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AddProduct;"]},"metadata":{},"sourceType":"module"}
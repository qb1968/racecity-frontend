{"ast":null,"code":"import _defineProperty from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{makeStyles}from'@material-ui/core/styles';import InputLabel from'@material-ui/core/InputLabel';import MenuItem from'@material-ui/core/MenuItem';import FormHelperText from'@material-ui/core/FormHelperText';import FormControl from'@material-ui/core/FormControl';import Select from'@material-ui/core/Select';import TextField from'@material-ui/core/TextField';import Button from'@material-ui/core/Button';import SearchIcon from'@material-ui/icons/Search';import{getCategories,list}from'./apiCore';import Card from'./Card';var useStyles=makeStyles(function(theme){return{formControl:{margin:theme.spacing(1),minWidth:120},selectEmpty:{marginTop:theme.spacing(2)},tField:{width:800,marginTop:2},root:{'& > *':{margin:theme.spacing(2)}}};});var Search=function Search(){var _useState=useState({categories:[],category:'',search:'',results:[],searched:false}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var categories=data.categories,category=data.category,search=data.search,results=data.results,searched=data.searched;var loadCategories=function loadCategories(){getCategories().then(function(data){if(data.error){console.log(data.error);}else{setData(_objectSpread(_objectSpread({},data),{},{categories:data}));}});};useEffect(function(){loadCategories();},[]);var searchData=function searchData(){// console.log(search, category);\nif(search){list({search:search||undefined,category:category}).then(function(response){if(response.error){console.log(response.error);}else{setData(_objectSpread(_objectSpread({},data),{},{results:response,searched:true}));}});}};var searchSubmit=function searchSubmit(e){e.preventDefault();searchData();};var handleChange=function handleChange(name){return function(event){var _objectSpread2;setData(_objectSpread(_objectSpread({},data),{},(_objectSpread2={},_defineProperty(_objectSpread2,name,event.target.value),_defineProperty(_objectSpread2,\"searched\",false),_objectSpread2)));};};var searchMessage=function searchMessage(searched,results){if(searched&&results.length>0){return\"Found \".concat(results.length,\" products\");}if(searched&&results.length<1){return\"Search: No products found\";}};var searchedProducts=function searchedProducts(){var results=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-10\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"mt-4 mb-4 text-center\"},searchMessage(searched,results)),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},results.map(function(product,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 mb-3\"},/*#__PURE__*/React.createElement(Card,{key:i,product:product}));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-1\"}));};var classes=useStyles();var searchForm=function searchForm(){return/*#__PURE__*/React.createElement(\"form\",{onSubmit:searchSubmit,className:classes.root},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group input-group-lg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"demo-simple-select-helper-label\"},\"Select\"),/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-placeholder-label-label\",id:\"demo-simple-select-placeholder-label\",value:data.name,onChange:handleChange('category'),displayEmpty:true,className:classes.selectEmpty},/*#__PURE__*/React.createElement(MenuItem,{value:\"All\"},/*#__PURE__*/React.createElement(\"em\",null,\"All\")),categories.map(function(c,i){return/*#__PURE__*/React.createElement(MenuItem,{key:i,value:c._id},c.name);})))),/*#__PURE__*/React.createElement(TextField,{onChange:handleChange('search'),id:\"outlined-basic\",label:/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(SearchIcon,null),\"Search by name\"),variant:\"outlined\",className:classes.tField,autoComplete:\"off\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-3 mt-2\",style:{border:'none'}},/*#__PURE__*/React.createElement(Button,{ml:2,variant:\"contained\",color:\"primary\",type:\"submit\"},\"Search\")))));};return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container mb-3\"},searchForm()),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid mb-3\"},searchedProducts(results)));};export default Search;","map":{"version":3,"sources":["D:/Dustin/racecity-frontend/src/core/Search.js"],"names":["React","useState","useEffect","makeStyles","InputLabel","MenuItem","FormHelperText","FormControl","Select","TextField","Button","SearchIcon","getCategories","list","Card","useStyles","theme","formControl","margin","spacing","minWidth","selectEmpty","marginTop","tField","width","root","Search","categories","category","search","results","searched","data","setData","loadCategories","then","error","console","log","searchData","undefined","response","searchSubmit","e","preventDefault","handleChange","name","event","target","value","searchMessage","length","searchedProducts","map","product","i","classes","searchForm","c","_id","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nimport { getCategories, list } from './apiCore';\r\nimport Card from './Card';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  selectEmpty: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  tField: {\r\n    width: 800,\r\n    marginTop: 2,\r\n  },\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(2),\r\n    },\r\n  },\r\n}));\r\n\r\nconst Search = () => {\r\n  const [data, setData] = useState({\r\n    categories: [],\r\n    category: '',\r\n    search: '',\r\n    results: [],\r\n    searched: false,\r\n  });\r\n\r\n  const { categories, category, search, results, searched } = data;\r\n\r\n  const loadCategories = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setData({ ...data, categories: data });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const searchData = () => {\r\n    // console.log(search, category);\r\n    if (search) {\r\n      list({ search: search || undefined, category: category }).then(\r\n        (response) => {\r\n          if (response.error) {\r\n            console.log(response.error);\r\n          } else {\r\n            setData({ ...data, results: response, searched: true });\r\n          }\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const searchSubmit = (e) => {\r\n    e.preventDefault();\r\n    searchData();\r\n  };\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setData({ ...data, [name]: event.target.value, searched: false });\r\n  };\r\n\r\n  const searchMessage = (searched, results) => {\r\n    if (searched && results.length > 0) {\r\n      return `Found ${results.length} products`;\r\n    }\r\n    if (searched && results.length < 1) {\r\n      return `Search: No products found`;\r\n    }\r\n  };\r\n\r\n  const searchedProducts = (results = []) => {\r\n    return (\r\n      <div className='row'>\r\n        <div className='col-md-1'></div>\r\n        <div className='col-md-10'>\r\n          <h2 className='mt-4 mb-4 text-center'>{searchMessage(searched, results)}</h2>\r\n          <div className='row'>\r\n            {results.map((product, i) => (\r\n              <div className='col-md-4 mb-3'>\r\n                <Card key={i} product={product} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className='col-md-1'></div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  const searchForm = () => (\r\n    <form onSubmit={searchSubmit} className={classes.root}>\r\n      <span className='input-group-text'>\r\n        <div className='input-group input-group-lg'>\r\n          <div className='input-group-prepend'>\r\n            <FormControl className={classes.formControl}>\r\n              <InputLabel id='demo-simple-select-helper-label'>\r\n                Select\r\n              </InputLabel>\r\n              <Select\r\n                labelId='demo-simple-select-placeholder-label-label'\r\n                id='demo-simple-select-placeholder-label'\r\n                value={data.name}\r\n                onChange={handleChange('category')}\r\n                displayEmpty\r\n                className={classes.selectEmpty}\r\n              >\r\n                <MenuItem value='All'>\r\n                  <em>All</em>\r\n                </MenuItem>\r\n                {categories.map((c, i) => (\r\n                  <MenuItem key={i} value={c._id}>\r\n                    {c.name}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n          </div>\r\n\r\n          <TextField\r\n            onChange={handleChange('search')}\r\n            id='outlined-basic'\r\n            label={<span><SearchIcon/>Search by name</span>}\r\n            variant='outlined'\r\n            className={classes.tField}\r\n            autoComplete='off'\r\n          />\r\n\r\n          <div className='ml-3 mt-2' style={{ border: 'none' }}>\r\n            <Button ml={2} variant='contained' color='primary' type='submit'>\r\n              Search\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </span>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <div className='row'>\r\n      <div className='container mb-3'>{searchForm()}</div>\r\n      <div className='container-fluid mb-3'>{searchedProducts(results)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Layout from\"./Layout\";import{read,listRelated}from\"./apiCore\";import Card from\"./Card\";var Product=function Product(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),relatedProduct=_useState4[0],setRelatedProduct=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var loadSingleProduct=function loadSingleProduct(productId){read(productId).then(function(data){if(data.error){setError(data.error);}else{setProduct(data);// fetch related products\nlistRelated(data._id).then(function(data){if(data.error){setError(data.error);}else{setRelatedProduct(data);}});}});};useEffect(function(){var productId=props.match.params.productId;loadSingleProduct(productId);},[props]);return/*#__PURE__*/React.createElement(Layout,{title:product&&product.name,description:product&&product.description&&product.description.substring(0,100),className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{id:\"nav-main\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"group\"},/*#__PURE__*/React.createElement(\"li\",{className:\"main-li\"},/*#__PURE__*/React.createElement(\"a\",{className:\"main-a\",href:\"/comics\"},\"Comics\")),/*#__PURE__*/React.createElement(\"li\",{className:\"main-li\"},/*#__PURE__*/React.createElement(\"a\",{className:\"main-a\",href:\"/toys\"},\"Toys\")),/*#__PURE__*/React.createElement(\"li\",{className:\"main-li\"},/*#__PURE__*/React.createElement(\"a\",{className:\"main-a\",href:\"/tcg\"},\"TCG\")),/*#__PURE__*/React.createElement(\"li\",{className:\"main-li\"},/*#__PURE__*/React.createElement(\"a\",{className:\"main-a\",href:\"/statues\"},\"Statues\")),/*#__PURE__*/React.createElement(\"li\",{className:\"main-li\"},/*#__PURE__*/React.createElement(\"a\",{className:\"main-a\",href:\"/sportscards\"},\"Sports Cards\")),/*#__PURE__*/React.createElement(\"li\",{className:\"main-li\"},/*#__PURE__*/React.createElement(\"a\",{className:\"main-a\",href:\"/pedalcars\"},\"Pedal Cars\")),/*#__PURE__*/React.createElement(\"li\",{className:\"main-li\"},/*#__PURE__*/React.createElement(\"a\",{className:\"main-a\",href:\"/vintagead\"},\"Vintage Advertising\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-sm-10\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Product Details\"),product&&product.description&&/*#__PURE__*/React.createElement(Card,{product:product,showViewProductButton:false})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Related products\"),relatedProduct.map(function(p,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3\",key:i},/*#__PURE__*/React.createElement(Card,{product:p}));})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"})));};export default Product;","map":{"version":3,"sources":["D:/Dustin/racecity-frontend/src/core/Product.js"],"names":["React","useState","useEffect","Layout","read","listRelated","Card","Product","props","product","setProduct","relatedProduct","setRelatedProduct","error","setError","loadSingleProduct","productId","then","data","_id","match","params","name","description","substring","map","p","i"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport { read, listRelated } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\n\r\nconst Product = (props) => {\r\n  const [product, setProduct] = useState({});\r\n  const [relatedProduct, setRelatedProduct] = useState([]);\r\n  const [error, setError] = useState(false);\r\n\r\n  const loadSingleProduct = (productId) => {\r\n    read(productId).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProduct(data);\r\n        // fetch related products\r\n        listRelated(data._id).then((data) => {\r\n          if (data.error) {\r\n            setError(data.error);\r\n          } else {\r\n            setRelatedProduct(data);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const productId = props.match.params.productId;\r\n    loadSingleProduct(productId);\r\n  }, [props]);\r\n\r\n  return (\r\n    <Layout\r\n      title={product && product.name}\r\n      description={\r\n        product && product.description && product.description.substring(0, 100)\r\n      }\r\n      className=\"container-fluid\"\r\n    >\r\n      <div id=\"nav-main\">\r\n        <ul className=\"group\">\r\n          <li className=\"main-li\">\r\n            <a className=\"main-a\" href=\"/comics\">\r\n              Comics\r\n            </a>\r\n          </li>\r\n          <li className=\"main-li\">\r\n            <a className=\"main-a\" href=\"/toys\">\r\n              Toys\r\n            </a>\r\n          </li>\r\n          <li className=\"main-li\">\r\n            <a className=\"main-a\" href=\"/tcg\">\r\n              TCG\r\n            </a>\r\n          </li>\r\n          <li className=\"main-li\">\r\n            <a className=\"main-a\" href=\"/statues\">\r\n              Statues\r\n            </a>\r\n          </li>\r\n          <li className=\"main-li\">\r\n            <a className=\"main-a\" href=\"/sportscards\">\r\n              Sports Cards\r\n            </a>\r\n          </li>\r\n          <li className=\"main-li\">\r\n            <a className=\"main-a\" href=\"/pedalcars\">\r\n              Pedal Cars\r\n            </a>\r\n          </li>\r\n          <li className=\"main-li\">\r\n            <a className=\"main-a\" href=\"/vintagead\">\r\n              Vintage Advertising\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\"></div>\r\n        <div className=\"col-md-4 col-sm-10\">\r\n          <h4>Product Details</h4>\r\n          {product && product.description && (\r\n            <Card product={product} showViewProductButton={false} />\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"col-md-4\">\r\n          <h4>Related products</h4>\r\n          {relatedProduct.map((p, i) => (\r\n            <div className=\"mb-3\" key={i}>\r\n              <Card product={p} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"col-md-2\"></div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n"]},"metadata":{},"sourceType":"module"}
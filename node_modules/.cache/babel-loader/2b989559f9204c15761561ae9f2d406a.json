{"ast":null,"code":"var _jsxFileName = \"D:\\\\Dustin\\\\racecity-frontend\\\\src\\\\core\\\\Search.js\";\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { getFilteredProducts } from './apiCore'\n// import Card from './Card'\n// import InputLabel from '@material-ui/core/InputLabel';\n//    import MenuItem from '@material-ui/core/MenuItem';\n//    import FormHelperText from '@material-ui/core/FormHelperText';\n//    import FormControl from '@material-ui/core/FormControl';\n//    import Select from '@material-ui/core/Select';\n//   import TextField from '@material-ui/core/TextField';\n//    import Button from '@material-ui/core/Button';\n//    import SearchIcon from '@material-ui/icons/Search';\n// const Search = () => {\n//   const [allData, setAllData] = useState([]);\n//   const [filteredData, setFilteredData] = useState([allData]);\n//   const handleSearch = (event) => {\n//     let value = event.target.value.toLowerCase();\n//     let result = [];\n//     console.log(value);\n//     result = allData.filter((data) => {\n//       return data.name.search(value) != -1;\n//     });\n//     setFilteredData(result);\n//   };\n//   useEffect(() => {\n//     getFilteredProducts()\n//       .then((response) => {\n//         console.log(response.data);\n//         setAllData(response.data);\n//         setFilteredData(response.data);\n//       })\n//       .catch((error) => {\n//         console.log(\"Error getting fake data: \" + error);\n//       });\n//   }, []);\n//   return (\n//     <div className=\"App\">\n//       <div style={{ margin: \"0 auto\", marginTop: \"10%\" }}>\n//         <label>Search:</label>\n//         <input type=\"text\" onChange={(event) => handleSearch(event)} />\n//       </div>\n//       <div style={{ padding: 10 }}>\n//         {filteredData.map((value, index) => {\n//           return (\n//             <div key={value.index}>\n//               <div >{value.name}</div>\n//             </div>\n//           );\n//         })}\n//       </div>\n//     </div>\n//   );\n// };\n// export default Search;\nimport React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport { getCategories, getFilteredProducts, list } from \"./apiCore\";\nimport Card from \"./Card\";\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  },\n  tField: {\n    width: 800,\n    marginTop: 2\n  },\n  root: {\n    \"& > *\": {\n      margin: theme.spacing(2)\n    }\n  }\n}));\n\nconst Search = () => {\n  const [data, setData] = useState({\n    categories: [],\n    category: \"\",\n    search: \"\",\n    results: [],\n    searched: false\n  });\n  const {\n    categories,\n    category,\n    search,\n    results,\n    searched\n  } = data;\n\n  const loadCategories = () => {\n    getFilteredProducts().then(data => {\n      console.log(data);\n\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setData({ ...data,\n          categories: data\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const searchData = () => {\n    console.log(search, category);\n\n    if (search) {\n      list({\n        search: search,\n        category: category\n      }).then(response => {\n        if (response.error) {\n          console.log(response.error);\n        } else {\n          setData({ ...data,\n            results: response,\n            searched: true\n          });\n          console.log(response);\n        }\n      });\n    }\n  };\n\n  const searchSubmit = e => {\n    e.preventDefault();\n    searchData();\n  };\n\n  const handleChange = name => event => {\n    setData({ ...data,\n      [name]: event.target.value,\n      searched: false\n    });\n  };\n\n  const searchMessage = (searched, results) => {\n    if (searched && results.length > 0) {\n      return `Found ${results.length} products`;\n    }\n\n    if (searched && results.length < 1) {\n      return `Search: No products found`;\n    }\n  };\n\n  const searchedProducts = (results = []) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"mt-4 mb-4 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }, searchMessage(searched, results)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }\n    }, results.map((product, i) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      key: i,\n      product: product,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const classes = useStyles();\n\n  const searchForm = () => /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: searchSubmit,\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group input-group-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"All\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"em\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, \"All\"))), /*#__PURE__*/React.createElement(TextField, {\n    onChange: handleChange(\"search\"),\n    id: \"outlined-basic\",\n    label: /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(SearchIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }\n    }), \"Search by name\"),\n    variant: \"outlined\",\n    className: classes.tField,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-3 mt-2\",\n    style: {\n      border: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    ml: 2,\n    variant: \"contained\",\n    color: \"primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, \"Search\")))));\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }\n  }, searchForm()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }\n  }, searchedProducts(results)));\n};\n\nexport default Search;","map":{"version":3,"sources":["D:/Dustin/racecity-frontend/src/core/Search.js"],"names":["React","useState","useEffect","makeStyles","InputLabel","MenuItem","FormHelperText","FormControl","Select","TextField","Button","SearchIcon","getCategories","getFilteredProducts","list","Card","useStyles","theme","formControl","margin","spacing","minWidth","selectEmpty","marginTop","tField","width","root","Search","data","setData","categories","category","search","results","searched","loadCategories","then","console","log","error","searchData","response","searchSubmit","e","preventDefault","handleChange","name","event","target","value","searchMessage","length","searchedProducts","map","product","i","classes","searchForm","border"],"mappings":"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","sourcesContent":["// import React, { useState, useEffect } from 'react';\r\n// import axios from 'axios';\r\n// import { getFilteredProducts } from './apiCore'\r\n// import Card from './Card'\r\n// import InputLabel from '@material-ui/core/InputLabel';\r\n//    import MenuItem from '@material-ui/core/MenuItem';\r\n//    import FormHelperText from '@material-ui/core/FormHelperText';\r\n//    import FormControl from '@material-ui/core/FormControl';\r\n//    import Select from '@material-ui/core/Select';\r\n//   import TextField from '@material-ui/core/TextField';\r\n//    import Button from '@material-ui/core/Button';\r\n//    import SearchIcon from '@material-ui/icons/Search';\r\n\r\n\r\n\r\n// const Search = () => {\r\n//   const [allData, setAllData] = useState([]);\r\n//   const [filteredData, setFilteredData] = useState([allData]);\r\n\r\n//   const handleSearch = (event) => {\r\n//     let value = event.target.value.toLowerCase();\r\n//     let result = [];\r\n//     console.log(value);\r\n//     result = allData.filter((data) => {\r\n//       return data.name.search(value) != -1;\r\n//     });\r\n//     setFilteredData(result);\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     getFilteredProducts()\r\n//       .then((response) => {\r\n//         console.log(response.data);\r\n//         setAllData(response.data);\r\n//         setFilteredData(response.data);\r\n//       })\r\n//       .catch((error) => {\r\n//         console.log(\"Error getting fake data: \" + error);\r\n//       });\r\n//   }, []);\r\n\r\n//   return (\r\n//     <div className=\"App\">\r\n//       <div style={{ margin: \"0 auto\", marginTop: \"10%\" }}>\r\n//         <label>Search:</label>\r\n//         <input type=\"text\" onChange={(event) => handleSearch(event)} />\r\n//       </div>\r\n//       <div style={{ padding: 10 }}>\r\n//         {filteredData.map((value, index) => {\r\n//           return (\r\n//             <div key={value.index}>\r\n//               <div >{value.name}</div>\r\n//             </div>\r\n//           );\r\n//         })}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default Search;\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\n\r\nimport { getCategories,getFilteredProducts, list } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  selectEmpty: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  tField: {\r\n    width: 800,\r\n    marginTop: 2,\r\n  },\r\n  root: {\r\n    \"& > *\": {\r\n      margin: theme.spacing(2),\r\n    },\r\n  },\r\n}));\r\n\r\nconst Search = () => {\r\n  const [data, setData] = useState({\r\n    categories: [],\r\n    category: \"\",\r\n    search: \"\",\r\n    results: [],\r\n    searched: false,\r\n  });\r\n\r\n  const { categories, category, search, results, searched } = data;\r\n\r\n  const loadCategories = () => {\r\n    getFilteredProducts().then((data) => {\r\n      console.log(data)\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setData({ ...data, categories: data });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const searchData = () => {\r\n    console.log(search, category);\r\n    if (search) {\r\n      list({ search: search , category: category }).then(\r\n        \r\n        (response) => {\r\n          if (response.error) {\r\n            console.log(response.error);\r\n          } else {\r\n            setData({ ...data, results: response, searched: true });console.log(response)\r\n          }\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const searchSubmit = (e) => {\r\n    e.preventDefault();\r\n    searchData();\r\n  };\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setData({ ...data, [name]: event.target.value, searched: false });\r\n  };\r\n\r\n  const searchMessage = (searched, results) => {\r\n    if (searched && results.length > 0) {\r\n      return `Found ${results.length} products`;\r\n    }\r\n    if (searched && results.length < 1) {\r\n      return `Search: No products found`;\r\n    }\r\n  };\r\n\r\n  const searchedProducts = (results = []) => {\r\n    return (\r\n      <div className=\"row\">\r\n        <div className=\"col-md-1\"></div>\r\n        <div className=\"col-md-10\">\r\n          <h2 className=\"mt-4 mb-4 text-center\">\r\n            {searchMessage(searched, results)}\r\n          </h2>\r\n          <div className=\"row\">\r\n            {results.map((product, i) => (\r\n              <div className=\"col-md-4 mb-3\">\r\n                <Card key={i} product={product} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-1\"></div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  const searchForm = () => (\r\n    <form onSubmit={searchSubmit} className={classes.root}>\r\n      <span className=\"input-group-text\">\r\n        <div className=\"input-group input-group-lg\">\r\n          <div className=\"input-group-prepend\">\r\n            <MenuItem value=\"All\">\r\n              <em>All</em>\r\n            </MenuItem>\r\n          </div>\r\n\r\n          <TextField\r\n            onChange={handleChange(\"search\")}\r\n            id=\"outlined-basic\"\r\n            label={\r\n              <span>\r\n                <SearchIcon />\r\n                Search by name\r\n              </span>\r\n            }\r\n            variant=\"outlined\"\r\n            className={classes.tField}\r\n            autoComplete=\"off\"\r\n          />\r\n\r\n          <div className=\"ml-3 mt-2\" style={{ border: \"none\" }}>\r\n            <Button ml={2} variant=\"contained\" color=\"primary\" type=\"submit\">\r\n              Search\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </span>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"container mb-3\">{searchForm()}</div>\r\n      <div className=\"container-fluid mb-3\">{searchedProducts(results)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}
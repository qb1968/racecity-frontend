{"ast":null,"code":"import _defineProperty from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Layout from'../core/Layout';import{isAuthenticated}from'../auth';import{Link,Redirect}from'react-router-dom';import{getProduct,getCategories,updateProduct}from'./apiAdmin';var UpdateProduct=function UpdateProduct(_ref){var match=_ref.match;var _useState=useState({name:'',description:'',price:'',categories:[],category:'',shipping:'',quantity:'',photo:'',image:'',loading:false,error:false,createdProduct:'',redirectToProfile:false,formData:''}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setCategories=_useState4[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var name=values.name,description=values.description,price=values.price,category=values.category,shipping=values.shipping,quantity=values.quantity,loading=values.loading,error=values.error,createdProduct=values.createdProduct,redirectToProfile=values.redirectToProfile,formData=values.formData;var init=function init(productId){getProduct(productId).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error}));}else{// populate the state\nsetValues(_objectSpread(_objectSpread({},values),{},{name:data.name,description:data.description,price:data.price,category:data.category._id,shipping:data.shipping,quantity:data.quantity,formData:new FormData()}));// load categories\ninitCategories();}});};// load categories and set form data\nvar initCategories=function initCategories(){getCategories().then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error}));}else{setCategories(data);}});};useEffect(function(){init(match.params.productId);},[]);var handleChange=function handleChange(name){return function(event){var value=name==='photo'?event.target.files[0]:event.target.value;formData.set(name,value);setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));};};var handleChange2=function handleChange2(name){return function(event){var value=name==='image'?event.target.files[0]:event.target.value;formData.set(name,value);setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));};};var clickSubmit=function clickSubmit(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{error:'',loading:true}));updateProduct(match.params.productId,user._id,token,formData).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error}));}else{setValues(_objectSpread(_objectSpread({},values),{},{name:'',description:'',photo:'',image:'',price:'',quantity:'',loading:false,error:false,redirectToProfile:true,createdProduct:data.name}));}});};var newPostForm=function newPostForm(){return/*#__PURE__*/React.createElement(\"form\",{className:\"mb-3\",onSubmit:clickSubmit},/*#__PURE__*/React.createElement(\"h4\",null,\"Front Photo\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"btn btn-secondary\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('photo'),type:\"file\",name:\"photo\",accept:\"image/*\"}))),/*#__PURE__*/React.createElement(\"h4\",null,\"Rear Photo\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"btn btn-secondary\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange2('image'),type:\"file\",name:\"image\",accept:\"image/*\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Name\"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('name'),type:\"text\",className:\"form-control\",value:name})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Description\"),/*#__PURE__*/React.createElement(\"textarea\",{onChange:handleChange('description'),className:\"form-control\",value:description})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Price\"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('price'),type:\"number\",className:\"form-control\",value:price})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Category\"),/*#__PURE__*/React.createElement(\"select\",{onChange:handleChange('category'),className:\"form-control\"},/*#__PURE__*/React.createElement(\"option\",null,\"Please select\"),categories&&categories.map(function(c,i){return/*#__PURE__*/React.createElement(\"option\",{key:i,value:c._id},c.name);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Shipping\"),/*#__PURE__*/React.createElement(\"select\",{onChange:handleChange('shipping'),className:\"form-control\"},/*#__PURE__*/React.createElement(\"option\",null,\"Please select\"),/*#__PURE__*/React.createElement(\"option\",{value:\"0\"},\"No\"),/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},\"Yes\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Quantity\"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('quantity'),type:\"number\",className:\"form-control\",value:quantity})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-primary\"},\"Update Product\"));};var showError=function showError(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",style:{display:error?'':'none'}},error);};var showSuccess=function showSuccess(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-info\",style:{display:createdProduct?'':'none'}},/*#__PURE__*/React.createElement(\"h2\",null,\"\".concat(createdProduct),\" is updated!\"));};var showLoading=function showLoading(){return loading&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Loading...\"));};var redirectUser=function redirectUser(){if(redirectToProfile){if(!error){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}}};return/*#__PURE__*/React.createElement(Layout,{title:\"Add a new product\",description:\"G'day \".concat(user.name,\", ready to add a new product?\")},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 offset-md-2\"},showLoading(),showSuccess(),showError(),newPostForm(),redirectUser())));};export default UpdateProduct;","map":{"version":3,"sources":["D:/Dustin/racecity-frontend/src/admin/UpdateProduct.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","Redirect","getProduct","getCategories","updateProduct","UpdateProduct","match","name","description","price","categories","category","shipping","quantity","photo","image","loading","error","createdProduct","redirectToProfile","formData","values","setValues","setCategories","user","token","init","productId","then","data","_id","FormData","initCategories","params","handleChange","event","value","target","files","set","handleChange2","clickSubmit","preventDefault","newPostForm","map","c","i","showError","display","showSuccess","showLoading","redirectUser"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { getProduct, getCategories, updateProduct } from './apiAdmin';\r\n\r\nconst UpdateProduct = ({ match }) => {\r\n  const [values, setValues] = useState({\r\n    name: '',\r\n    description: '',\r\n    price: '',\r\n    categories: [],\r\n    category: '',\r\n    shipping: '',\r\n    quantity: '',\r\n   photo: '',\r\n    image: '',\r\n    loading: false,\r\n    error: false,\r\n    createdProduct: '',\r\n    redirectToProfile: false,\r\n    formData: '',\r\n  });\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  const { user, token } = isAuthenticated();\r\n  const {\r\n    name,\r\n    description,\r\n    price,\r\n    // categories,\r\n    category,\r\n    shipping,\r\n    quantity,\r\n    loading,\r\n    error,\r\n    createdProduct,\r\n    redirectToProfile,\r\n    formData,\r\n  } = values;\r\n\r\n  const init = (productId) => {\r\n    getProduct(productId).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        // populate the state\r\n        setValues({\r\n          ...values,\r\n          name: data.name,\r\n          description: data.description,\r\n          price: data.price,\r\n          category: data.category._id,\r\n          shipping: data.shipping,\r\n          quantity: data.quantity,\r\n          formData: new FormData(),\r\n        });\r\n        // load categories\r\n        initCategories();\r\n      }\r\n    });\r\n  };\r\n\r\n  // load categories and set form data\r\n  const initCategories = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setCategories(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init(match.params.productId);\r\n  }, []);\r\n\r\n  const handleChange = (name) => (event) => {\r\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n    formData.set(name, value);\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n  const handleChange2 = (name) => (event) => {\r\n    const value = name === 'image' ? event.target.files[0] : event.target.value;\r\n    formData.set(name, value);\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: '', loading: true });\r\n\r\n    updateProduct(match.params.productId, user._id, token, formData).then(\r\n      (data) => {\r\n        if (data.error) {\r\n          setValues({ ...values, error: data.error });\r\n        } else {\r\n          setValues({\r\n            ...values,\r\n            name: '',\r\n            description: '',\r\n           photo: '',\r\n            image: '',\r\n            price: '',\r\n            quantity: '',\r\n            loading: false,\r\n            error: false,\r\n            redirectToProfile: true,\r\n            createdProduct: data.name,\r\n          });\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const newPostForm = () => (\r\n    <form className='mb-3' onSubmit={clickSubmit}>\r\n      <h4>Front Photo</h4>\r\n      <div className='form-group'>\r\n        <label className='btn btn-secondary'>\r\n          <input\r\n            onChange={handleChange('photo')}\r\n            type='file'\r\n            name='photo'\r\n            \r\n            accept='image/*'\r\n          />\r\n        </label>\r\n      </div>\r\n      <h4>Rear Photo</h4>\r\n      <div className='form-group'>\r\n        <label className='btn btn-secondary'>\r\n          <input\r\n            onChange={handleChange2('image')}\r\n            type='file'\r\n            name='image'\r\n            \r\n            accept='image/*'\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Name</label>\r\n        <input\r\n          onChange={handleChange('name')}\r\n          type='text'\r\n          className='form-control'\r\n          value={name}\r\n        />\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Description</label>\r\n        <textarea\r\n          onChange={handleChange('description')}\r\n          className='form-control'\r\n          value={description}\r\n        />\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Price</label>\r\n        <input\r\n          onChange={handleChange('price')}\r\n          type='number'\r\n          className='form-control'\r\n          value={price}\r\n        />\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Category</label>\r\n        <select onChange={handleChange('category')} className='form-control'>\r\n          <option>Please select</option>\r\n          {categories &&\r\n            categories.map((c, i) => (\r\n              <option key={i} value={c._id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Shipping</label>\r\n        <select onChange={handleChange('shipping')} className='form-control'>\r\n          <option>Please select</option>\r\n          <option value='0'>No</option>\r\n          <option value='1'>Yes</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Quantity</label>\r\n        <input\r\n          onChange={handleChange('quantity')}\r\n          type='number'\r\n          className='form-control'\r\n          value={quantity}\r\n        />\r\n      </div>\r\n\r\n      <button className='btn btn-outline-primary'>Update Product</button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className='alert alert-danger'\r\n      style={{ display: error ? '' : 'none' }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = () => (\r\n    <div\r\n      className='alert alert-info'\r\n      style={{ display: createdProduct ? '' : 'none' }}\r\n    >\r\n      <h2>{`${createdProduct}`} is updated!</h2>\r\n    </div>\r\n  );\r\n\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className='alert alert-success'>\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  const redirectUser = () => {\r\n    if (redirectToProfile) {\r\n      if (!error) {\r\n        return <Redirect to='/' />;\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title='Add a new product'\r\n      description={`G'day ${user.name}, ready to add a new product?`}\r\n    >\r\n      <div className='row'>\r\n        <div className='col-md-8 offset-md-2'>\r\n          {showLoading()}\r\n          {showSuccess()}\r\n          {showError()}\r\n          {newPostForm()}\r\n          {redirectUser()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default UpdateProduct;"]},"metadata":{},"sourceType":"module"}
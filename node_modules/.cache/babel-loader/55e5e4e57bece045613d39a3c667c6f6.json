{"ast":null,"code":"import _slicedToArray from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Layout from'../core/Layout';import{isAuthenticated}from'../auth';import{Link}from'react-router-dom';import{getProducts,deleteProduct}from'./apiAdmin';var ManageProducts=function ManageProducts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var loadProducts=function loadProducts(){getProducts().then(function(data){if(data.error){console.log(data.error);}else{setProducts(data);}});};var destroy=function destroy(productId){deleteProduct(productId,user._id,token).then(function(data){if(data.error){console.log(data.error);}else{loadProducts();}});};useEffect(function(){loadProducts();},[]);return/*#__PURE__*/React.createElement(Layout,{title:\"Manage Products\",description:\"Perform CRUD on products\",className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"text-center\"},\"Total \",products.length,\" products\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group\"},products.map(function(p,i){return/*#__PURE__*/React.createElement(\"li\",{key:i,className:\"list-group-item d-flex justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(\"strong\",null,p.name),/*#__PURE__*/React.createElement(Link,{to:\"/admin/product/update/\".concat(p._id)},/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-warning badge-pill\"},\"Update\")),/*#__PURE__*/React.createElement(Link,null,/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return destroy(p._id);},className:\"badge badge-danger badge-pill\"},\"Delete\")));})))));};export default ManageProducts;","map":{"version":3,"sources":["D:/Dustin/racecity-frontend/src/admin/ManageProducts.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","getProducts","deleteProduct","ManageProducts","products","setProducts","user","token","loadProducts","then","data","error","console","log","destroy","productId","_id","length","map","p","i","name"],"mappings":"yJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,MAAP,KAAmB,gBAAnB,CACA,OAASC,eAAT,KAAgC,SAAhC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,CAAsBC,aAAtB,KAA2C,YAA3C,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3B,cAAgCP,QAAQ,CAAC,EAAD,CAAxC,wCAAOQ,QAAP,eAAiBC,WAAjB,eAEA,qBAAwBN,eAAe,EAAvC,CAAQO,IAAR,kBAAQA,IAAR,CAAcC,KAAd,kBAAcA,KAAd,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBP,WAAW,GAAGQ,IAAd,CAAmB,SAACC,IAAD,CAAU,CAC3B,GAAIA,IAAI,CAACC,KAAT,CAAgB,CACdC,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB,EACD,CAFD,IAEO,CACLN,WAAW,CAACK,IAAD,CAAX,CACD,CACF,CAND,EAOD,CARD,CAUA,GAAMI,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,SAAD,CAAe,CAC7Bb,aAAa,CAACa,SAAD,CAAYT,IAAI,CAACU,GAAjB,CAAsBT,KAAtB,CAAb,CAA0CE,IAA1C,CAA+C,SAACC,IAAD,CAAU,CACvD,GAAIA,IAAI,CAACC,KAAT,CAAgB,CACdC,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB,EACD,CAFD,IAEO,CACLH,YAAY,GACb,CACF,CAND,EAOD,CARD,CAUAX,SAAS,CAAC,UAAM,CACdW,YAAY,GACb,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,oBAAC,MAAD,EACE,KAAK,CAAC,iBADR,CAEE,WAAW,CAAC,0BAFd,CAGE,SAAS,CAAC,iBAHZ,eAKE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,QAAf,eACE,0BAAI,SAAS,CAAC,aAAd,WAAmCJ,QAAQ,CAACa,MAA5C,aADF,cAEE,8BAFF,cAGE,0BAAI,SAAS,CAAC,YAAd,EACGb,QAAQ,CAACc,GAAT,CAAa,SAACC,CAAD,CAAIC,CAAJ,qBACZ,0BACE,GAAG,CAAEA,CADP,CAEE,SAAS,CAAC,mEAFZ,eAIE,kCAASD,CAAC,CAACE,IAAX,CAJF,cAKE,oBAAC,IAAD,EAAM,EAAE,iCAA2BF,CAAC,CAACH,GAA7B,CAAR,eACE,4BAAM,SAAS,CAAC,gCAAhB,WADF,CALF,cAQE,oBAAC,IAAD,mBACE,4BACE,OAAO,CAAE,yBAAMF,CAAAA,OAAO,CAACK,CAAC,CAACH,GAAH,CAAb,EADX,CAEE,SAAS,CAAC,+BAFZ,WADF,CARF,CADY,EAAb,CADH,CAHF,CADF,CALF,CADF,CAmCD,CAhED,CAkEA,cAAeb,CAAAA,cAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { getProducts, deleteProduct } from './apiAdmin';\r\n\r\nconst ManageProducts = () => {\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const loadProducts = () => {\r\n    getProducts().then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setProducts(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const destroy = (productId) => {\r\n    deleteProduct(productId, user._id, token).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        loadProducts();\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProducts();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout\r\n      title='Manage Products'\r\n      description='Perform CRUD on products'\r\n      className='container-fluid'\r\n    >\r\n      <div className='row'>\r\n        <div className='col-12'>\r\n          <h2 className='text-center'>Total {products.length} products</h2>\r\n          <hr />\r\n          <ul className='list-group'>\r\n            {products.map((p, i) => (\r\n              <li\r\n                key={i}\r\n                className='list-group-item d-flex justify-content-between align-items-center'\r\n              >\r\n                <strong>{p.name}</strong>\r\n                <Link to={`/admin/product/update/${p._id}`}>\r\n                  <span className='badge badge-warning badge-pill'>Update</span>\r\n                </Link>\r\n                <Link>\r\n                  <span\r\n                    onClick={() => destroy(p._id)}\r\n                    className='badge badge-danger badge-pill'\r\n                  >\r\n                    Delete\r\n                  </span>\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default ManageProducts;\r\n"]},"metadata":{},"sourceType":"module"}
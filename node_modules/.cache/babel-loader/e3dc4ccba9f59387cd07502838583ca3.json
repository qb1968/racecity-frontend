{"ast":null,"code":"var _jsxFileName = \"D:\\\\Dustin\\\\racecity-frontend\\\\src\\\\core\\\\Search.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Card from \"./Card\";\nimport { getCategories, list } from \"./apiCore\";\n\nconst Search = () => {\n  const [data, setData] = useState({\n    categories: [],\n    category: \"\",\n    search: \"\",\n    results: [],\n    searched: false\n  });\n  const {\n    categories,\n    category,\n    search,\n    results,\n    searched\n  } = data;\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () => {\n    getCategories().then(res => {\n      if (res.error) {\n        console.log(res.error);\n      } else {\n        setData({ ...data,\n          categories: res\n        });\n      }\n    });\n  };\n\n  const searchdata = () => {\n    if (search || category) {\n      list({\n        search: search || undefined,\n        category: category\n      }).then(res => {\n        if (res.error) {\n          console.log(res.error);\n        } else {\n          setData({ ...data,\n            results: res,\n            searched: true\n          });\n        }\n      });\n    }\n  };\n\n  const searchSubmit = e => {\n    e.preventDefault();\n    searchdata();\n  };\n\n  const handleChange = name => event => {\n    setData({ ...data,\n      [name]: event.target.value,\n      searched: false\n    });\n  };\n\n  const searchMessage = (searched, products) => {\n    let prodsQty = products.length || 0;\n    let message = \"\";\n\n    if (searched) {\n      if (prodsQty > 0) {\n        message = `Found ${prodsQty} products`;\n      } else {\n        message = \"No products found\";\n      }\n    }\n\n    return message;\n  };\n\n  const searchedProducts = (results = []) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"mt-4 bm-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, searchMessage(searched, results)), /*#__PURE__*/React.createElement(\"div\", {\n      key: \"1\",\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, results.map((p, i) => /*#__PURE__*/React.createElement(\"div\", {\n      key: \"\",\n      className: \" mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      key: i,\n      product: p,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    })))));\n  };\n\n  const searchForm = () => {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: searchSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group input-group-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"btn mr-2\",\n      onChange: handleChange(\"category\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"All\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, \"All\"), categories.map((c, i) => /*#__PURE__*/React.createElement(\"option\", {\n      key: i,\n      value: c._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 19\n      }\n    }, c.name.substr(0, 20))))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"search\",\n      className: \"form-control\",\n      onChange: handleChange(\"search\"),\n      placeholder: \"Search by name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn input-group-append\",\n      style: {\n        border: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, \"Search\"))));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, searchForm()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, searchedProducts(results)));\n};\n\nexport default Search;","map":{"version":3,"sources":["D:/Dustin/racecity-frontend/src/core/Search.js"],"names":["React","useState","useEffect","Card","getCategories","list","Search","data","setData","categories","category","search","results","searched","loadCategories","then","res","error","console","log","searchdata","undefined","searchSubmit","e","preventDefault","handleChange","name","event","target","value","searchMessage","products","prodsQty","length","message","searchedProducts","map","p","i","searchForm","c","_id","substr","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Card from \"./Card\";\r\nimport { getCategories, list } from \"./apiCore\";\r\n\r\nconst Search = () => {\r\n  const [data, setData] = useState({\r\n    categories: [],\r\n    category: \"\",\r\n    search: \"\",\r\n    results: [],\r\n    searched: false,\r\n  });\r\n\r\n  const { categories, category, search, results, searched } = data;\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadCategories = () => {\r\n    getCategories().then((res) => {\r\n      if (res.error) {\r\n        console.log(res.error);\r\n      } else {\r\n        setData({ ...data, categories: res });\r\n      }\r\n    });\r\n  };\r\n\r\n  const searchdata = () => {\r\n    if (search || category) {\r\n      list({\r\n        search: search || undefined,\r\n        category: category,\r\n      }).then((res) => {\r\n        if (res.error) {\r\n          console.log(res.error);\r\n        } else {\r\n          setData({ ...data, results: res, searched: true });\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const searchSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    searchdata();\r\n  };\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setData({ ...data, [name]: event.target.value, searched: false });\r\n  };\r\n\r\n  const searchMessage = (searched, products) => {\r\n    let prodsQty = products.length || 0;\r\n    let message = \"\";\r\n\r\n    if (searched) {\r\n      if (prodsQty > 0) {\r\n        message = `Found ${prodsQty} products`;\r\n      } else {\r\n        message = \"No products found\";\r\n      }\r\n    }\r\n\r\n    return message;\r\n  };\r\n\r\n  const searchedProducts = (results = []) => {\r\n    return (\r\n      <div>\r\n        <h2 className=\"mt-4 bm-4\">{searchMessage(searched, results)}</h2>\r\n        <div key=\"1\" className=\"row\">\r\n          {results.map((p, i) => (\r\n            <div key=\"\" className=\" mb-3\">\r\n              <Card key={i} product={p} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const searchForm = () => {\r\n    return (\r\n      <form onSubmit={searchSubmit}>\r\n        <span className=\"input-group-text\">\r\n          <div className=\"input-group input-group-lg\">\r\n            <div className=\"input-group-prepend\">\r\n              <select className=\"btn mr-2\" onChange={handleChange(\"category\")}>\r\n                <option value=\"All\">All</option>\r\n                {categories.map((c, i) => (\r\n                  <option key={i} value={c._id}>\r\n                    {c.name.substr(0, 20)}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <input\r\n              type=\"search\"\r\n              className=\"form-control\"\r\n              onChange={handleChange(\"search\")}\r\n              placeholder=\"Search by name\"\r\n            ></input>\r\n          </div>\r\n          <div className=\"btn input-group-append\" style={{ border: \"none\" }}>\r\n            <button className=\"input-group-text\">Search</button>\r\n          </div>\r\n        </span>\r\n      </form>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"container-fluid mb-3\">{searchForm()}</div>\r\n      <div className=\"container-fluid mb-3\">{searchedProducts(results)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}
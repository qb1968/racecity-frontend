{"ast":null,"code":"import _defineProperty from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\Dustin\\\\racecity-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Card from\"./Card\";import{getCategories,list}from\"./apiCore\";var Search=function Search(){var _useState=useState({categories:[],category:\"\",search:\"\",results:[],searched:false}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var categories=data.categories,category=data.category,search=data.search,results=data.results,searched=data.searched;useEffect(function(){loadCategories();},[]);var loadCategories=function loadCategories(){getCategories().then(function(res){if(res.error){console.log(res.error);}else{setData(_objectSpread(_objectSpread({},data),{},{categories:res}));}});};var searchdata=function searchdata(){if(search||category){list({search:search||undefined,category:category}).then(function(res){if(res.error){console.log(res.error);}else{setData(_objectSpread(_objectSpread({},data),{},{results:res,searched:true}));}});}};var searchSubmit=function searchSubmit(e){e.preventDefault();searchdata();};var handleChange=function handleChange(name){return function(event){var _objectSpread2;setData(_objectSpread(_objectSpread({},data),{},(_objectSpread2={},_defineProperty(_objectSpread2,name,event.target.value),_defineProperty(_objectSpread2,\"searched\",false),_objectSpread2)));};};var searchMessage=function searchMessage(searched,products){var prodsQty=products.length||0;var message=\"\";if(searched){if(prodsQty>0){message=\"Found \".concat(prodsQty,\" products\");}else{message=\"No products found\";}}return message;};var searchedProducts=function searchedProducts(){var results=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"mt-4 bm-4\"},searchMessage(searched,results)),/*#__PURE__*/React.createElement(\"div\",{key:\"\",className:\"row\"},results.map(function(p,i){return/*#__PURE__*/React.createElement(\"div\",{key:\"\",className:\"col-sm-4\"},/*#__PURE__*/React.createElement(Card,{key:i,product:p}));})));};var searchForm=function searchForm(){return/*#__PURE__*/React.createElement(\"form\",{onSubmit:searchSubmit},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group input-group-lg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"select\",{className:\"btn mr-2\",onChange:handleChange(\"category\")},/*#__PURE__*/React.createElement(\"option\",{value:\"All\"},\"All\"),categories.map(function(c,i){return/*#__PURE__*/React.createElement(\"option\",{key:i,value:c._id},c.name.substr(0,20));}))),/*#__PURE__*/React.createElement(\"input\",{type:\"search\",className:\"form-control\",onChange:handleChange(\"search\"),placeholder:\"Search by name\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"btn input-group-append\",style:{border:\"none\"}},/*#__PURE__*/React.createElement(\"button\",{className:\"input-group-text\"},\"Search\"))));};return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid mb-3\"},searchForm()),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid \"},searchedProducts(results)));};export default Search;","map":{"version":3,"sources":["D:/Dustin/racecity-frontend/src/core/Search.js"],"names":["React","useState","useEffect","Card","getCategories","list","Search","categories","category","search","results","searched","data","setData","loadCategories","then","res","error","console","log","searchdata","undefined","searchSubmit","e","preventDefault","handleChange","name","event","target","value","searchMessage","products","prodsQty","length","message","searchedProducts","map","p","i","searchForm","c","_id","substr","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Card from \"./Card\";\r\nimport { getCategories, list } from \"./apiCore\";\r\n\r\nconst Search = () => {\r\n  const [data, setData] = useState({\r\n    categories: [],\r\n    category: \"\",\r\n    search: \"\",\r\n    results: [],\r\n    searched: false,\r\n  });\r\n\r\n  const { categories, category, search, results, searched } = data;\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadCategories = () => {\r\n    getCategories().then((res) => {\r\n      if (res.error) {\r\n        console.log(res.error);\r\n      } else {\r\n        setData({ ...data, categories: res });\r\n      }\r\n    });\r\n  };\r\n\r\n  const searchdata = () => {\r\n    if (search || category) {\r\n      list({\r\n        search: search || undefined,\r\n        category: category,\r\n      }).then((res) => {\r\n        if (res.error) {\r\n          console.log(res.error);\r\n        } else {\r\n          setData({ ...data, results: res, searched: true });\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const searchSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    searchdata();\r\n  };\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setData({ ...data, [name]: event.target.value, searched: false });\r\n  };\r\n\r\n  const searchMessage = (searched, products) => {\r\n    let prodsQty = products.length || 0;\r\n    let message = \"\";\r\n\r\n    if (searched) {\r\n      if (prodsQty > 0) {\r\n        message = `Found ${prodsQty} products`;\r\n      } else {\r\n        message = \"No products found\";\r\n      }\r\n    }\r\n\r\n    return message;\r\n  };\r\n\r\n  const searchedProducts = (results = []) => {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <h2 className=\"mt-4 bm-4\">{searchMessage(searched, results)}</h2>\r\n        <div key=\"\" className=\"row\">\r\n          {results.map((p, i) => (\r\n            <div key=\"\" className=\"col-sm-4\">\r\n              <Card key={i} product={p} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const searchForm = () => {\r\n    return (\r\n      <form onSubmit={searchSubmit}>\r\n        <span className=\"input-group-text\">\r\n          <div className=\"input-group input-group-lg\">\r\n            <div className=\"input-group-prepend\">\r\n              <select className=\"btn mr-2\" onChange={handleChange(\"category\")}>\r\n                <option value=\"All\">All</option>\r\n                {categories.map((c, i) => (\r\n                  <option key={i} value={c._id}>\r\n                    {c.name.substr(0, 20)}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <input\r\n              type=\"search\"\r\n              className=\"form-control\"\r\n              onChange={handleChange(\"search\")}\r\n              placeholder=\"Search by name\"\r\n            ></input>\r\n          </div>\r\n          <div className=\"btn input-group-append\" style={{ border: \"none\" }}>\r\n            <button className=\"input-group-text\">Search</button>\r\n          </div>\r\n        </span>\r\n      </form>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"container-fluid mb-3\">{searchForm()}</div>\r\n      <div className=\"container-fluid \">{searchedProducts(results)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}